{% load view_tags %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <p><b>Basket Products: </b>{{ basketProducts }}</p>
    {% getProductsFromSubcat 5 1 %}
    <script>
    //not converted items
      const hasDiscount = "{% hasDiscount %}".split("***"); 
      const hasBasketProducts = "{{ basketProducts }}".split("***");
      const hasProducts = [
        "{% getProductsFromSubcat 1 %}".split("***"),
        "{% getProductsFromSubcat 2 %}".split("***"),
        "{% getProductsFromSubcat 3 %}".split("***"),
        "{% getProductsFromSubcat 4 %}".split("***"),
        "{% getProductsFromSubcat 5 %}".split("***"),
        "{% getProductsFromSubcat 6 %}".split("***"),
        "{% getProductsFromSubcat 7 %}".split("***"),
        "{% getProductsFromSubcat 8 %}".split("***"),
        "{% getProductsFromSubcat 9 %}".split("***"),
        "{% getProductsFromSubcat 10 %}".split("***"),
        "{% getProductsFromSubcat 11 %}".split("***"),
        "{% getProductsFromSubcat 12 %}".split("***"),
        "{% getProductsFromSubcat 13 %}".split("***"),
        "{% getProductsFromSubcat 14 %}".split("***"),
        "{% getProductsFromSubcat 15 %}".split("***"),
        "{% getProductsFromSubcat 16 %}".split("***"),
        "{% getProductsFromSubcat 17 %}".split("***"),
        "{% getProductsFromSubcat 18 %}".split("***"),
        "{% getProductsFromSubcat 19 %}".split("***"),
        "{% getProductsFromSubcat 20 %}".split("***"),
      ];
      const hasSubcatImages = [
        "{% getSubcatsFromCat 1 2 %}",
        "{% getSubcatsFromCat 2 2 %}",
        "{% getSubcatsFromCat 3 2 %}",
        "{% getSubcatsFromCat 4 2 %}",
        "{% getSubcatsFromCat 5 2 %}",
        "{% getSubcatsFromCat 6 2 %}",
        "{% getSubcatsFromCat 7 2 %}",
        "{% getSubcatsFromCat 8 2 %}",
      ];
      const hasSubcatsName = [
        "{% getSubcatsFromCat 3 1 %}",
        "{% getSubcatsFromCat 4 1 %}",
        "{% getSubcatsFromCat 5 1 %}",
        "{% getSubcatsFromCat 6 1 %}",
        "{% getSubcatsFromCat 7 1 %}",
        "{% getSubcatsFromCat 8 1 %}",
        "{% getSubcatsFromCat 9 1 %}",
        "{% getSubcatsFromCat 10 1 %}",
        "{% getSubcatsFromCat 11 1 %}",
        "{% getSubcatsFromCat 12 1 %}",
      ];

      //default arrays where discount items will be pushed
      var discountItems = []; 
      var basketProducts = [];
      var products = [];
      var subcatImages = [];
      var subcatNames = [];
      var catNames = [];
      var hotshot = "{% hasHotshot %}".split(";;;");
      ("{% for cat in categories %}");
      pushedElement = "{{cat.1}}";
      console.log(pushedElement);
      catNames.push(pushedElement);
      (" {% endfor %}");

      const singleSplit = (fromArray, toArray, method = 0) => {
        if (method === 0) {
          fromArray.map((x) => {
            toArray.push(x.split(";;;"));
          });
        }
        if (method === 1) {
          fromArray.map((x) => {
            toArray.push(x.split(";"));
          });
        }
        if(method === 2){
        for (item in fromArray) {
        toArray.push(fromArray[item].split(";;;"));
      }
        }
      };
      const multiSplit = (fromArray, toArray) => {
        var supportArray = [];
        for (i in fromArray) {
          for (y in fromArray[i]) {
            supportArray.push(fromArray[i][y].split(";;;"));
          }
          toArray.push(supportArray);
          var supportArray = [];
        }
      };
      
      multiSplit(hasProducts, products);
      singleSplit(hasDiscount, discountItems, 2);
      singleSplit(hasBasketProducts, basketProducts);
      singleSplit(hasSubcatImages, subcatImages, 1);
    
    
      console.log(discountItems)
      
      

    </script>
    <br />
    <h1>has shotshot 37 line</h1>
    <h6>{% hasHotshot %}</h6>
    <h1>End of hotshot</h1>
    <!-- {% hasDiscount %} -->
    <h1>Has discount</h1>
    {% hasDiscount %}
    <h1>End of discount</h1>
    <br />
    
    <form id="deleteProductToBasket" action="/deleteProductToBasket/" method="post">
      {% csrf_token %}
      <input type="hidenn" name="id" value="5"/><br />
      <input type="submit" value="Set Hotshot" />
    </form>
  </body>
</html>
