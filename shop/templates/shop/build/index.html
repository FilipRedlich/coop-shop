{% load static %} {% load view_tags %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="E-commerce website" />
    <title>E-commerce</title>
    <link
      rel="icon shortcut"
      href="./static/shop/shop_logo.3f953129.svg"
      type="image/x-icon"
    />
    <link rel="stylesheet" href="./static/shop/index.4a9cb38b.css" />
    <script src="./static/shop/index.aec550dc.js" type="module" defer></script>
  </head>

  <body class="bg-dark">
    <script>
      const CSRF_TOKEN = "{{ csrf_token }}";
      const currentUser = "{{request.session.email}}";

      //Not converted items
      const hasDiscount = "{% hasDiscount %}".split("***");
      const hasBasketProducts = "{{ basketProducts }}".split("***");
      const hasProducts = [
        "{% getProductsFromSubcat 1 %}".split("***"),
        "{% getProductsFromSubcat 2 %}".split("***"),
        "{% getProductsFromSubcat 3 %}".split("***"),
        "{% getProductsFromSubcat 4 %}".split("***"),
        "{% getProductsFromSubcat 5 %}".split("***"),
        "{% getProductsFromSubcat 6 %}".split("***"),
        "{% getProductsFromSubcat 7 %}".split("***"),
        "{% getProductsFromSubcat 8 %}".split("***"),
        "{% getProductsFromSubcat 9 %}".split("***"),
        "{% getProductsFromSubcat 10 %}".split("***"),
        "{% getProductsFromSubcat 11 %}".split("***"),
        "{% getProductsFromSubcat 12 %}".split("***"),
        "{% getProductsFromSubcat 13 %}".split("***"),
        "{% getProductsFromSubcat 14 %}".split("***"),
        "{% getProductsFromSubcat 15 %}".split("***"),
        "{% getProductsFromSubcat 16 %}".split("***"),
        "{% getProductsFromSubcat 17 %}".split("***"),
        "{% getProductsFromSubcat 18 %}".split("***"),
        "{% getProductsFromSubcat 19 %}".split("***"),
        "{% getProductsFromSubcat 20 %}".split("***"),
      ];
      const hasSubcatImages = [
        "{% getSubcatsFromCat 1 2 %}",
        "{% getSubcatsFromCat 2 2 %}",
        "{% getSubcatsFromCat 3 2 %}",
        "{% getSubcatsFromCat 4 2 %}",
        "{% getSubcatsFromCat 5 2 %}",
        "{% getSubcatsFromCat 6 2 %}",
        "{% getSubcatsFromCat 7 2 %}",
        "{% getSubcatsFromCat 8 2 %}",
      ];
      const hasSubcatsName = [
        "{% getSubcatsFromCat 3 1 %}",
        "{% getSubcatsFromCat 4 1 %}",
        "{% getSubcatsFromCat 5 1 %}",
        "{% getSubcatsFromCat 6 1 %}",
        "{% getSubcatsFromCat 7 1 %}",
        "{% getSubcatsFromCat 8 1 %}",
        "{% getSubcatsFromCat 9 1 %}",
        "{% getSubcatsFromCat 10 1 %}",
        "{% getSubcatsFromCat 11 1 %}",
        "{% getSubcatsFromCat 12 1 %}",
      ];

      //default arrays where discount items will be pushed
      var discountItems = [];
      var basketProducts = [];
      var products = [];
      var subcatImages = []; //on build it should be empty!!!
      var subcatNames = [];
      var catNames = [];
      var hotshot = "{% hasHotshot %}".split(";;;"); 
      var pushedElement;
      ("{% for cat in categories %}");
      pushedElement = "{{cat.1}}";
      console.log(pushedElement);
      catNames.push(pushedElement);
      (" {% endfor %}");

      const singleSplit = (fromArray, toArray, method = 0) => {
        if (method === 0) {
          fromArray.map((x) => {
            toArray.push(x.split(";;;"));
          });
        }
        if (method === 1) {
          fromArray.map((x) => {
            toArray.push(x.split(";"));
          });
        }
        if (method === 2) {
          for (item in fromArray) {
            toArray.push(fromArray[item].split(";;;"));
          }
        }
      };
      const multiSplit = (fromArray, toArray) => {
        var supportArray = [];
        for (i in fromArray) {
          for (y in fromArray[i]) {
            supportArray.push(fromArray[i][y].split(";;;"));
          }
          toArray.push(supportArray);
          var supportArray = [];
        }
      };

      multiSplit(hasProducts, products);
      singleSplit(hasDiscount, discountItems, 2);
      singleSplit(hasBasketProducts, basketProducts);
      singleSplit(hasSubcatImages, subcatImages, 1);
      singleSplit(hasSubcatsName, subcatNames, 1);
      console.log(discountItems);
    </script>
    <div id="navRoot">Nav not rendered</div>
    <div id="root">Main not rendered</div>
    <div id="footerRoot">footer not rendered</div>
  </body>
</html>
